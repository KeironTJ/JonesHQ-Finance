{% extends "base.html" %}

{% block title %}Dashboard - JonesHQ Finance{% endblock %}

{% block content %}
<div class="container-fluid dashboard-page">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1><i class="bi bi-speedometer2"></i> Dashboard</h1>
        <div>
            <a href="{{ url_for('settings.index') }}" class="btn btn-outline-secondary">
                <i class="bi bi-gear"></i> Settings
            </a>
        </div>
    </div>

    {% if not selected_account %}
    <div class="alert alert-warning">
        <i class="bi bi-exclamation-triangle"></i> 
        <strong>No Account Selected</strong><br>
        Please create a "Joint" type account to track payday periods, or select an account below.
    </div>
    {% endif %}

    <!-- Net Worth Summary Card -->
    <div class="card mb-4 border-primary dashboard-section">
        <div class="card-header bg-primary text-white {% if not networth_expanded %}collapsed{% endif %}" role="button" data-bs-toggle="collapse" data-bs-target="#networthCollapse" aria-expanded="{{ 'true' if networth_expanded else 'false' }}" aria-controls="networthCollapse" style="cursor:pointer;user-select:none">
            <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
                <h5 class="mb-0"><i class="bi bi-graph-up-arrow"></i> Net Worth Summary</h5>
                <div class="d-flex align-items-center gap-2">
                    <i class="bi bi-chevron-down dashboard-chevron"></i>
                </div>
            </div>
        </div>
        <div id="networthCollapse" class="collapse {% if networth_expanded %}show{% endif %}">
            <div class="card-body">
            <div class="row">
                <!-- Total Net Worth -->
                <div class="col-md-3 mb-3 mb-md-0">
                    <div class="text-center p-3 rounded networth-metric {% if networth.net_worth >= 0 %}is-positive{% else %}is-negative{% endif %}">
                        <h6 class="text-muted mb-2">Total Net Worth</h6>
                        <h3 class="mb-0 {% if networth.net_worth >= 0 %}text-success{% else %}text-danger{% endif %}">
                            £{{ "{:,.2f}".format(networth.net_worth) }}
                        </h3>
                        <small class="text-muted">Including pensions</small>
                    </div>
                </div>
                
                <!-- Liquid Net Worth -->
                <div class="col-md-3 mb-3 mb-md-0">
                    <div class="text-center p-3 rounded networth-metric {% if networth.liquid_net_worth >= 0 %}is-positive{% else %}is-negative{% endif %}">
                        <h6 class="text-muted mb-2">Liquid Net Worth</h6>
                        <h3 class="mb-0 {% if networth.liquid_net_worth >= 0 %}text-success{% else %}text-danger{% endif %}">
                            £{{ "{:,.2f}".format(networth.liquid_net_worth) }}
                        </h3>
                        <small class="text-muted">Cash & Savings</small>
                    </div>
                </div>
                
                <!-- Total Assets -->
                <div class="col-md-3 mb-3 mb-md-0">
                    <div class="text-center p-3 rounded bg-light">
                        <h6 class="text-muted mb-2">Total Assets</h6>
                        <h3 class="mb-0 text-primary">
                            £{{ "{:,.2f}".format(networth.total_assets) }}
                        </h3>
                        <small class="text-muted">
                            Cash: £{{ "{:,.2f}".format(networth.cash) }} | 
                            Savings: £{{ "{:,.2f}".format(networth.savings) }}
                        </small>
                    </div>
                </div>
                
                <!-- Total Liabilities -->
                <div class="col-md-3">
                    <div class="text-center p-3 rounded bg-light">
                        <h6 class="text-muted mb-2">Total Liabilities</h6>
                        <h3 class="mb-0 text-danger">
                            £{{ "{:,.2f}".format(networth.total_liabilities) }}
                        </h3>
                        <small class="text-muted">
                            Cards: £{{ "{:,.2f}".format(networth.credit_cards) }} | 
                            Loans: £{{ "{:,.2f}".format(networth.loans) }}
                        </small>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>

    <!-- Account Selector -->
    {% if accounts %}
    <div class="card mb-4 dashboard-section">
        <div class="card-header bg-primary text-white {% if not account_selection_expanded %}collapsed{% endif %}" role="button" data-bs-toggle="collapse" data-bs-target="#accountSelectionCollapse" aria-expanded="{{ 'true' if account_selection_expanded else 'false' }}" aria-controls="accountSelectionCollapse" style="cursor:pointer;user-select:none">
            <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
                <h5 class="mb-0"><i class="bi bi-bank"></i> Account Selection</h5>
                <i class="bi bi-chevron-down dashboard-chevron"></i>
            </div>
        </div>
        <div id="accountSelectionCollapse" class="collapse {% if account_selection_expanded %}show{% endif %}">
            <div class="card-body">
                <div class="account-card-grid">
                    {% for account in accounts %}
                    <a href="{{ url_for('dashboard.index', account_id=account.id, year=selected_year) }}" class="account-card text-decoration-none {% if selected_account and account.id == selected_account.id %}account-card-selected{% endif %}" {% if selected_account and account.id == selected_account.id %}aria-current="true"{% endif %}>
                        <div class="account-card-title">{{ account.name }}</div>
                        <div class="account-card-meta">{{ account.account_type }}</div>
                        <div class="account-card-balance {% if account.calculated_balance >= 0 %}text-success{% else %}text-danger{% endif %}">
                            £{{ "{:,.2f}".format(account.calculated_balance) }}
                        </div>
                        {% if selected_account and account.id == selected_account.id %}
                        <span class="badge bg-primary account-card-badge">
                            <i class="bi bi-check-circle"></i> Selected
                        </span>
                        {% endif %}
                    </a>
                    {% endfor %}
                </div>
                {% if selected_account %}
                <div class="mt-3 text-muted small">
                    Tracking: <strong>{{ selected_account.name }}</strong> ({{ selected_account.account_type }})
                </div>
                {% endif %}
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Payday Period Tracking -->
    {% if payday_data %}
    <div class="card mb-4 dashboard-section">
        <div class="card-header bg-success text-white {% if not payday_expanded %}collapsed{% endif %}" role="button" data-bs-toggle="collapse" data-bs-target="#paydayCollapse" aria-expanded="{{ 'true' if payday_expanded else 'false' }}" aria-controls="paydayCollapse" style="cursor:pointer;user-select:none">
            <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
                <h5 class="mb-0">
                    <i class="bi bi-calendar-check"></i> Payday Period Tracking 
                    <small class="ms-2 payday-subtitle">(Payday: {{ payday_day }}{{ 'st' if payday_day == 1 or payday_day == 21 or payday_day == 31 else 'nd' if payday_day == 2 or payday_day == 22 else 'rd' if payday_day == 3 or payday_day == 23 else 'th' }} of each month)</small>
                </h5>
                <div class="d-flex align-items-center gap-2 flex-wrap">
                    {% if selected_account %}
                    <span class="badge bg-light text-dark selected-account-badge">
                        <i class="bi bi-bank"></i> {{ selected_account.name }}
                    </span>
                    {% endif %}
                    <button class="btn btn-sm btn-light" onclick="event.stopPropagation();changeYear({{ selected_year - 1 }})" title="Previous Year">
                        <i class="bi bi-chevron-left"></i>
                    </button>
                    <span class="badge bg-light text-dark px-3 py-2" onclick="event.stopPropagation()">
                        {{ selected_year }}
                        {% if selected_year == current_year %}
                            <i class="bi bi-circle-fill text-success status-dot" title="Current Year"></i>
                        {% endif %}
                    </span>
                    <button class="btn btn-sm btn-light" onclick="event.stopPropagation();changeYear({{ selected_year + 1 }})" title="Next Year">
                        <i class="bi bi-chevron-right"></i>
                    </button>
                    <i class="bi bi-chevron-down dashboard-chevron"></i>
                </div>
            </div>
        </div>
        <div id="paydayCollapse" class="collapse {% if payday_expanded %}show{% endif %}">
            <div class="card-body payday-body payday-compact">
            <p class="text-muted mb-4">
                <i class="bi bi-info-circle"></i> 
                Showing projected balances from payday to payday, including both paid and unpaid transactions. 
                If payday falls on a weekend, it's adjusted to the previous working day.
            </p>
            
            <!-- Column Headers -->
            <div class="d-flex justify-content-between align-items-center mb-2 px-3 payday-columns">
                <div class="text-muted small payday-period-label">Period</div>
                <div class="d-flex gap-4 text-muted small payday-metrics">
                    <div class="payday-metric payday-metric-header">Ending Balance</div>
                    <div class="payday-metric payday-metric-header">Minimum</div>
                    <div class="payday-metric payday-metric-header">Extra Spend</div>
                </div>
            </div>
            
            <!-- Payday Periods Accordion -->
            <div class="accordion" id="paydayAccordion">
                {% for period in payday_data %}
                {% set is_current = period.start_date <= today <= period.end_date %}
                {% set is_past = period.end_date < today %}
                <div class="accordion-item{% if is_current %} current-period-item{% elif is_past %} past-period-item{% endif %}">
                    <h2 class="accordion-header" id="heading{{ loop.index }}">
                        <button class="accordion-button collapsed{% if is_current %} current-period-btn{% elif is_past %} past-period-btn{% endif %}" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ loop.index }}" aria-expanded="false" aria-controls="collapse{{ loop.index }}">
                            <div class="d-flex justify-content-between align-items-center w-100 me-3 payday-row">
                                <div style="flex: 1;">
                                    <strong class="me-2">{{ period.period_label }}</strong>
                                    <span class="text-muted small">{{ period.start_date.strftime('%d %b') }} - {{ period.end_date.strftime('%d %b %Y') }}</span>
                                    {% if is_current %}
                                        <span class="badge bg-success ms-2"><i class="bi bi-star-fill me-1"></i>Current Period</span>
                                    {% endif %}
                                </div>
                                <div class="d-flex gap-4 payday-metrics">
                                    <strong class="text-primary payday-metric">£{{ "%.2f"|format(period.rolling_balance) }}</strong>
                                    <strong class="text-warning payday-metric">£{{ "%.2f"|format(period.min_balance) }}</strong>
                                    <strong class="text-info payday-metric">£{{ "%.2f"|format(period.max_extra_spend) }}</strong>
                                </div>
                            </div>
                        </button>
                    </h2>
                    <div id="collapse{{ loop.index }}" class="accordion-collapse collapse" aria-labelledby="heading{{ loop.index }}" data-bs-parent="#paydayAccordion">
                        <div class="accordion-body">
                            <div class="row mb-3">
                                <div class="col-md-3">
                                    <div class="card bg-light">
                                        <div class="card-body text-center py-2">
                                            <div class="text-muted small">Opening Balance</div>
                                            <strong>£{{ "%.2f"|format(period.opening_balance) }}</strong>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card bg-primary bg-opacity-10">
                                        <div class="card-body text-center py-2">
                                            <div class="text-muted small">Ending Balance</div>
                                            <strong class="text-primary">£{{ "%.2f"|format(period.rolling_balance) }}</strong>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card bg-warning bg-opacity-10">
                                        <div class="card-body text-center py-2">
                                            <div class="text-muted small">Minimum Balance</div>
                                            <strong class="text-warning">£{{ "%.2f"|format(period.min_balance) }}</strong>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card bg-info bg-opacity-10">
                                        <div class="card-body text-center py-2">
                                            <div class="text-muted small">Safe Extra Spend</div>
                                            <strong class="text-info">£{{ "%.2f"|format(period.max_extra_spend) }}</strong>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            {% if period.category_breakdown %}
                            {% set period_idx = loop.index %}
                            
                            <!-- Income Section -->
                            {% if period.category_breakdown.income %}
                            <h6 class="mt-4 mb-3"><i class="bi bi-arrow-down-circle text-success me-2"></i>Income by Category</h6>
                            <div class="accordion" id="incomeAccordion{{ period_idx }}">
                                {% for cat in period.category_breakdown.income %}
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="incomeHeading{{ period_idx }}_{{ loop.index }}">
                                        <button class="accordion-button collapsed py-2" type="button" data-bs-toggle="collapse" data-bs-target="#incomeCollapse{{ period_idx }}_{{ loop.index }}" aria-expanded="false" aria-controls="incomeCollapse{{ period_idx }}_{{ loop.index }}">
                                            <div class="d-flex justify-content-between w-100 me-3">
                                                <span><i class="bi bi-tag-fill text-success me-2"></i>{{ cat.category }}</span>
                                                <strong class="text-success">£{{ "%.2f"|format(cat.total) }}</strong>
                                            </div>
                                        </button>
                                    </h2>
                                    <div id="incomeCollapse{{ period_idx }}_{{ loop.index }}" class="accordion-collapse collapse" aria-labelledby="incomeHeading{{ period_idx }}_{{ loop.index }}" data-bs-parent="#incomeAccordion{{ period_idx }}">
                                        <div class="accordion-body py-2">
                                            <table class="table table-sm table-hover mb-0">
                                                <tbody>
                                                    {% for subcat in cat.subcategories %}
                                                    <tr>
                                                        <td><i class="bi bi-caret-right-fill text-muted small me-2"></i>{{ subcat.name }}</td>
                                                        <td class="text-end text-success">£{{ "%.2f"|format(subcat.amount) }}</td>
                                                    </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                            {% endif %}
                            
                            <!-- Expenses Section -->
                            {% if period.category_breakdown.expenses %}
                            <h6 class="mt-4 mb-3"><i class="bi bi-arrow-up-circle text-danger me-2"></i>Expenses by Category</h6>
                            <div class="accordion" id="expenseAccordion{{ period_idx }}">
                                {% for cat in period.category_breakdown.expenses %}
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="expenseHeading{{ period_idx }}_{{ loop.index }}">
                                        <button class="accordion-button collapsed py-2" type="button" data-bs-toggle="collapse" data-bs-target="#expenseCollapse{{ period_idx }}_{{ loop.index }}" aria-expanded="false" aria-controls="expenseCollapse{{ period_idx }}_{{ loop.index }}">
                                            <div class="d-flex justify-content-between w-100 me-3">
                                                <span><i class="bi bi-tag-fill text-danger me-2"></i>{{ cat.category }}</span>
                                                <strong class="text-danger">£{{ "%.2f"|format(cat.total) }}</strong>
                                            </div>
                                        </button>
                                    </h2>
                                    <div id="expenseCollapse{{ period_idx }}_{{ loop.index }}" class="accordion-collapse collapse" aria-labelledby="expenseHeading{{ period_idx }}_{{ loop.index }}" data-bs-parent="#expenseAccordion{{ period_idx }}">
                                        <div class="accordion-body py-2">
                                            <table class="table table-sm table-hover mb-0">
                                                <tbody>
                                                    {% for subcat in cat.subcategories %}
                                                    <tr>
                                                        <td><i class="bi bi-caret-right-fill text-muted small me-2"></i>{{ subcat.name }}</td>
                                                        <td class="text-end text-danger">£{{ "%.2f"|format(subcat.amount) }}</td>
                                                    </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                            {% endif %}
                            
                            {% if not period.category_breakdown.income and not period.category_breakdown.expenses %}
                            <div class="alert alert-info mt-3 mb-0">
                                <i class="bi bi-info-circle"></i> No transactions in this period
                            </div>
                            {% endif %}
                            
                            {% else %}
                            <div class="alert alert-info mt-3 mb-0">
                                <i class="bi bi-info-circle"></i> No transactions in this period
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

            <!-- Legend -->
            <div class="alert alert-light mt-4 mb-0">
                <div class="row">
                    <div class="col-md-3">
                        <strong class="text-primary"><i class="bi bi-circle-fill"></i> Rolling Balance:</strong><br>
                        <small>Expected balance at end of period</small>
                    </div>
                    <div class="col-md-3">
                        <strong class="text-warning"><i class="bi bi-circle-fill"></i> MIN Balance:</strong><br>
                        <small>Lowest point during the period</small>
                    </div>
                    <div class="col-md-3">
                        <strong class="text-info"><i class="bi bi-circle-fill"></i> Max Extra Spend:</strong><br>
                        <small>Growth from start to end of period</small>
                    </div>
                    <div class="col-md-3">
                        <strong><i class="bi bi-info-circle"></i> Note:</strong><br>
                        <small>Includes unpaid transactions</small>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Financial Summaries -->
    <div class="card mb-4 dashboard-section">
        <div class="card-header bg-secondary text-white {% if not summaries_expanded %}collapsed{% endif %}" role="button" data-bs-toggle="collapse" data-bs-target="#summariesCollapse" aria-expanded="{{ 'true' if summaries_expanded else 'false' }}" aria-controls="summariesCollapse" style="cursor:pointer;user-select:none">
            <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
                <h5 class="mb-0"><i class="bi bi-bar-chart"></i> Financial Summaries</h5>
                <i class="bi bi-chevron-down dashboard-chevron"></i>
            </div>
        </div>
        <div id="summariesCollapse" class="collapse {% if summaries_expanded %}show{% endif %}">
            <div class="card-body">
                <div class="row">
        <!-- Credit Cards Summary -->
        <div class="col-md-6 col-lg-3 mb-3">
            <div class="card border-danger h-100">
                <div class="card-header bg-danger text-white">
                    <div class="d-flex justify-content-between align-items-center">
                        <h6 class="mb-0"><i class="bi bi-credit-card"></i> Credit Cards</h6>
                        <a href="{{ url_for('credit_cards.index') }}" class="btn btn-sm btn-light">
                            <i class="bi bi-arrow-right-circle"></i>
                        </a>
                    </div>
                </div>
                <div class="card-body">
                    <div class="mb-2">
                        <small class="text-muted">Active Cards</small>
                        <h4 class="mb-0">{{ credit_card_summary.count }}</h4>
                    </div>
                    <div class="mb-2">
                        <small class="text-muted">Total Balance</small>
                        <h5 class="mb-0 text-danger">£{{ "{:,.2f}".format(credit_card_summary.total_balance) }}</h5>
                    </div>
                    <div class="mb-2">
                        <small class="text-muted">Total Limit</small>
                        <div>£{{ "{:,.2f}".format(credit_card_summary.total_limit) }}</div>
                    </div>
                    <div>
                        <small class="text-muted">Available Credit</small>
                        <div class="text-success">£{{ "{:,.2f}".format(credit_card_summary.total_available) }}</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loans Summary -->
        <div class="col-md-6 col-lg-3 mb-3">
            <div class="card border-warning h-100">
                <div class="card-header bg-warning text-dark">
                    <div class="d-flex justify-content-between align-items-center">
                        <h6 class="mb-0"><i class="bi bi-cash-coin"></i> Loans</h6>
                        <a href="{{ url_for('loans.index') }}" class="btn btn-sm btn-dark">
                            <i class="bi bi-arrow-right-circle"></i>
                        </a>
                    </div>
                </div>
                <div class="card-body">
                    <div class="mb-2">
                        <small class="text-muted">Active Loans</small>
                        <h4 class="mb-0">{{ loan_summary.count }}</h4>
                    </div>
                    <div class="mb-2">
                        <small class="text-muted">Total Balance</small>
                        <h5 class="mb-0 text-danger">£{{ "{:,.2f}".format(loan_summary.total_balance) }}</h5>
                    </div>
                    <div>
                        <small class="text-muted">Monthly Payments</small>
                        <div>£{{ "{:,.2f}".format(loan_summary.total_monthly_payment) }}</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mortgage Summary -->
        <div class="col-md-6 col-lg-3 mb-3">
            <div class="card border-info h-100">
                <div class="card-header bg-info text-white">
                    <div class="d-flex justify-content-between align-items-center">
                        <h6 class="mb-0"><i class="bi bi-house-door"></i> Mortgage</h6>
                        <a href="{{ url_for('mortgage.index') }}" class="btn btn-sm btn-light">
                            <i class="bi bi-arrow-right-circle"></i>
                        </a>
                    </div>
                </div>
                <div class="card-body">
                    {% if mortgage_summary %}
                    <div class="mb-2">
                        <small class="text-muted">{{ mortgage_summary.lender }}</small>
                        <div class="fw-bold">{{ mortgage_summary.product_name }}</div>
                    </div>
                    <div class="mb-2">
                        <small class="text-muted">Current Balance</small>
                        <h5 class="mb-0 text-danger">£{{ "{:,.2f}".format(mortgage_summary.current_balance) }}</h5>
                    </div>
                    <div class="mb-2">
                        <small class="text-muted">Monthly Payment</small>
                        <div>£{{ "{:,.2f}".format(mortgage_summary.monthly_payment) }}</div>
                    </div>
                    <div>
                        <small class="text-muted">Interest Rate</small>
                        <div>{{ "{:.2f}".format(mortgage_summary.annual_rate) }}% APR</div>
                    </div>
                    {% else %}
                    <div class="text-center text-muted py-3">
                        <i class="bi bi-info-circle"></i><br>
                        No active mortgage
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Pensions Summary -->
        <div class="col-md-6 col-lg-3 mb-3">
            <div class="card border-success h-100">
                <div class="card-header bg-success text-white">
                    <div class="d-flex justify-content-between align-items-center">
                        <h6 class="mb-0"><i class="bi bi-piggy-bank"></i> Pensions</h6>
                        <a href="{{ url_for('pensions.index') }}" class="btn btn-sm btn-light">
                            <i class="bi bi-arrow-right-circle"></i>
                        </a>
                    </div>
                </div>
                <div class="card-body">
                    <div class="mb-2">
                        <small class="text-muted">Active Pensions</small>
                        <h4 class="mb-0">{{ pension_summary.count }}</h4>
                    </div>
                    <div class="mb-2">
                        <small class="text-muted">Current Value</small>
                        <h5 class="mb-0 text-success">£{{ "{:,.2f}".format(pension_summary.total_current_value) }}</h5>
                    </div>
                    <div>
                        <small class="text-muted">Projected Value</small>
                        <div class="text-primary">£{{ "{:,.2f}".format(pension_summary.total_projected_value) }}</div>
                    </div>
                </div>
            </div>
        </div>
        </div>
        </div>
    </div>
    </div>


    <!-- Quick Links -->
    <div class="card mb-4 dashboard-section">
        <div class="card-header bg-dark text-white {% if not quick_nav_expanded %}collapsed{% endif %}" role="button" data-bs-toggle="collapse" data-bs-target="#quickNavCollapse" aria-expanded="{{ 'true' if quick_nav_expanded else 'false' }}" aria-controls="quickNavCollapse" style="cursor:pointer;user-select:none">
            <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
                <h5 class="mb-0"><i class="bi bi-compass"></i> Quick Navigation</h5>
                <i class="bi bi-chevron-down dashboard-chevron"></i>
            </div>
        </div>
        <div id="quickNavCollapse" class="collapse {% if quick_nav_expanded %}show{% endif %}">
            <div class="card-body">
            <div class="row">
                <!-- Row 1: Core Features -->
                <div class="col-md-3 col-sm-6 mb-3">
                    <a href="{{ url_for('transactions.index') }}" class="text-decoration-none">
                        <div class="card border-primary h-100 hover-shadow">
                            <div class="card-body text-center">
                                <i class="bi bi-receipt display-4 text-primary"></i>
                                <h5 class="card-title mt-3">Transactions</h5>
                                <p class="card-text text-muted small">View all transactions</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-md-3 col-sm-6 mb-3">
                    <a href="{{ url_for('accounts.index') }}" class="text-decoration-none">
                        <div class="card border-success h-100 hover-shadow">
                            <div class="card-body text-center">
                                <i class="bi bi-bank display-4 text-success"></i>
                                <h5 class="card-title mt-3">Accounts</h5>
                                <p class="card-text text-muted small">Manage bank accounts</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-md-3 col-sm-6 mb-3">
                    <a href="{{ url_for('networth.index') }}" class="text-decoration-none">
                        <div class="card border-primary h-100 hover-shadow">
                            <div class="card-body text-center">
                                <i class="bi bi-graph-up-arrow display-4 text-primary"></i>
                                <h5 class="card-title mt-3">Net Worth</h5>
                                <p class="card-text text-muted small">Track overall wealth</p>
                            </div>
                        </div>
                    </a>
                </div>

                <!-- Row 2: Income & Expenses -->
                <div class="col-md-3 col-sm-6 mb-3">
                    <a href="{{ url_for('income.index') }}" class="text-decoration-none">
                        <div class="card border-success h-100 hover-shadow">
                            <div class="card-body text-center">
                                <i class="bi bi-arrow-down-circle display-4 text-success"></i>
                                <h5 class="card-title mt-3">Income</h5>
                                <p class="card-text text-muted small">Track income sources</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-md-3 col-sm-6 mb-3">
                    <a href="{{ url_for('expenses.index') }}" class="text-decoration-none">
                        <div class="card border-danger h-100 hover-shadow">
                            <div class="card-body text-center">
                                <i class="bi bi-arrow-up-circle display-4 text-danger"></i>
                                <h5 class="card-title mt-3">Expenses</h5>
                                <p class="card-text text-muted small">Manage expenses</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-md-3 col-sm-6 mb-3">
                    <a href="{{ url_for('categories.index') }}" class="text-decoration-none">
                        <div class="card border-secondary h-100 hover-shadow">
                            <div class="card-body text-center">
                                <i class="bi bi-tags display-4 text-secondary"></i>
                                <h5 class="card-title mt-3">Categories</h5>
                                <p class="card-text text-muted small">Manage categories</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-md-3 col-sm-6 mb-3">
                    <a href="{{ url_for('vendors.index') }}" class="text-decoration-none">
                        <div class="card border-dark h-100 hover-shadow">
                            <div class="card-body text-center">
                                <i class="bi bi-shop display-4 text-dark"></i>
                                <h5 class="card-title mt-3">Vendors</h5>
                                <p class="card-text text-muted small">Manage vendors</p>
                            </div>
                        </div>
                    </a>
                </div>

                <!-- Row 3: Debt & Obligations -->
                <div class="col-md-3 col-sm-6 mb-3">
                    <a href="{{ url_for('credit_cards.index') }}" class="text-decoration-none">
                        <div class="card border-danger h-100 hover-shadow">
                            <div class="card-body text-center">
                                <i class="bi bi-credit-card display-4 text-danger"></i>
                                <h5 class="card-title mt-3">Credit Cards</h5>
                                <p class="card-text text-muted small">Track card balances</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-md-3 col-sm-6 mb-3">
                    <a href="{{ url_for('loans.index') }}" class="text-decoration-none">
                        <div class="card border-warning h-100 hover-shadow">
                            <div class="card-body text-center">
                                <i class="bi bi-cash-coin display-4 text-warning"></i>
                                <h5 class="card-title mt-3">Loans</h5>
                                <p class="card-text text-muted small">Manage loan payments</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-md-3 col-sm-6 mb-3">
                    <a href="{{ url_for('mortgage.index') }}" class="text-decoration-none">
                        <div class="card border-info h-100 hover-shadow">
                            <div class="card-body text-center">
                                <i class="bi bi-house-door display-4 text-info"></i>
                                <h5 class="card-title mt-3">Mortgage</h5>
                                <p class="card-text text-muted small">Mortgage details</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-md-3 col-sm-6 mb-3">
                    <a href="{{ url_for('pensions.index') }}" class="text-decoration-none">
                        <div class="card border-success h-100 hover-shadow">
                            <div class="card-body text-center">
                                <i class="bi bi-piggy-bank display-4 text-success"></i>
                                <h5 class="card-title mt-3">Pensions</h5>
                                <p class="card-text text-muted small">Retirement planning</p>
                            </div>
                        </div>
                    </a>
                </div>

                <!-- Row 4: Other Features -->
                <div class="col-md-3 col-sm-6 mb-3">
                    <a href="{{ url_for('vehicles.index') }}" class="text-decoration-none">
                        <div class="card border-primary h-100 hover-shadow">
                            <div class="card-body text-center">
                                <i class="bi bi-car-front display-4 text-primary"></i>
                                <h5 class="card-title mt-3">Vehicles</h5>
                                <p class="card-text text-muted small">Cars & fuel tracking</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-md-3 col-sm-6 mb-3">
                    <a href="{{ url_for('childcare.index') }}" class="text-decoration-none">
                        <div class="card border-warning h-100 hover-shadow">
                            <div class="card-body text-center">
                                <i class="bi bi-people display-4 text-warning"></i>
                                <h5 class="card-title mt-3">Childcare</h5>
                                <p class="card-text text-muted small">Childcare expenses</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-md-3 col-sm-6 mb-3">
                    <a href="{{ url_for('settings.index') }}" class="text-decoration-none">
                        <div class="card border-secondary h-100 hover-shadow">
                            <div class="card-body text-center">
                                <i class="bi bi-gear display-4 text-secondary"></i>
                                <h5 class="card-title mt-3">Settings</h5>
                                <p class="card-text text-muted small">App configuration</p>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
